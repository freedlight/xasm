	.LIST 8051.lst
	.CPU  8051
; test sample for xgen8051.c
; opcode results in numeric sequence
; no errors should result

	.ORG	0100

ZLOC	.EQU	$0012	;page 0 address
LOC1	.EQU	$0123	;page 1 address
LOC2	.EQU	$0234	;page 2 address
LOC3	.EQU	$0345	;page 3 address
LOC4	.EQU	$0456	;page 4 address
LOC5	.EQU	$0567	;page 5 address
LOC6	.EQU	$0678	;page 6 address
LOC7	.EQU	$0789	;page 7 address
MLOC	.EQU	$3456	;long address

BEGIN
	NOP			
	AJMP	ZLOC
	LJMP	MLOC
	RR	A
	INC	A
	INC	ZLOC
	INC	@R0
	INC	@R1
	INC	R0
	INC	R1
	INC	R2
	INC	R3
	INC	R4
	INC	R5
	INC	R6
	INC	R7
	JBC	ACC.1,L1
	ACALL	ZLOC
	LCALL	MLOC
L1	RRC	A
	DEC	A
	DEC	ZLOC
	DEC	@R0
	DEC	@R1
	DEC	R0
	DEC	R1
	DEC	R2
	DEC	R3
	DEC	R4
	DEC	R5
	DEC	R6
	DEC	R7
	JB	ACC.1,L1
	AJMP	LOC1
	RET
	RL	A
	ADD	A,#ZLOC
	ADD	A,ZLOC
	ADD	A,@R0
	ADD	A,@R1
	ADD	A,R0
	ADD	A,R1
	ADD	A,R2
	ADD	A,R3
	ADD	A,R4
	ADD	A,R5
	ADD	A,R6
	ADD	A,R7
	JNB	ACC.1,L1
	ACALL	LOC1
	RETI
	RLC	A
	ADDC	A,#ZLOC
	ADDC	A,ZLOC
	ADDC	A,@R0
	ADDC	A,@R1
	ADDC	A,R0
	ADDC	A,R1
	ADDC	A,R2
	ADDC	A,R3
	ADDC	A,R4
	ADDC	A,R5
	ADDC	A,R6
	ADDC	A,R7
	JC	L1
	AJMP	LOC2
	ORL	ZLOC,A
	ORL	ZLOC,#ZLOC
	ORL	A,#ZLOC
	ORL	A,ZLOC
	ORL	A,@R0
	ORL	A,@R1
	ORL	A,R0
	ORL	A,R1
	ORL	A,R2
	ORL	A,R3
	ORL	A,R4
	ORL	A,R5
	ORL	A,R6
	ORL	A,R7
	JNC	L2
	ACALL	LOC2
	ANL	ZLOC,A
	ANL	ZLOC,#ZLOC
	ANL	A,#ZLOC
	ANL	A,ZLOC
	ANL	A,@R0
	ANL	A,@R1
	ANL	A,R0
	ANL	A,R1
	ANL	A,R2
	ANL	A,R3
	ANL	A,R4
	ANL	A,R5
	ANL	A,R6
	ANL	A,R7
	JZ	L2
	AJMP	LOC3
	XRL	ZLOC,A
	XRL	ZLOC,#ZLOC
	XRL	A,#ZLOC
	XRL	A,ZLOC
	XRL	A,@R0
	XRL	A,@R1
	XRL	A,R0
	XRL	A,R1
	XRL	A,R2
	XRL	A,R3
	XRL	A,R4
	XRL	A,R5
	XRL	A,R6
	XRL	A,R7
	JNZ	L2
	ACALL	LOC3
	ORL	C,ACC.1
	JMP	@A+DPTR
	MOV	A,#ZLOC
	MOV	ZLOC,#ZLOC
	MOV	@R0,#ZLOC
	MOV	@R1,#ZLOC
	MOV	R0,#ZLOC
	MOV	R1,#ZLOC
	MOV	R2,#ZLOC
	MOV	R3,#ZLOC
	MOV	R4,#ZLOC
	MOV	R5,#ZLOC
	MOV	R6,#ZLOC
	MOV	R7,#ZLOC
	SJMP	L2
	AJMP	LOC4
	ANL	C,ACC.1
	MOVC	A,@A+PC
L2	DIV	AB
	MOV	ZLOC,ZLOC
	MOV	ZLOC,@R0
	MOV	ZLOC,@R1
	MOV	ZLOC,R0
	MOV	ZLOC,R1
	MOV	ZLOC,R2
	MOV	ZLOC,R3
	MOV	ZLOC,R4
	MOV	ZLOC,R5
	MOV	ZLOC,R6
	MOV	ZLOC,R7
	MOV	DPTR,#MLOC
	ACALL	LOC4
	MOV	ACC.1,C
	MOVC	A,@A+DPTR
	SUBB	A,#ZLOC
	SUBB	A,ZLOC
	SUBB	A,@R0
	SUBB	A,@R1
	SUBB	A,R0
	SUBB	A,R1
	SUBB	A,R2
	SUBB	A,R3
	SUBB	A,R4
	SUBB	A,R5
	SUBB	A,R6
	SUBB	A,R7
	ORL	C,/ACC.1
	AJMP	LOC5
	MOV	C,ACC.1
	INC	DPTR
	MUL	AB
	.DB	$A5	;reserved
	MOV	@R0,ZLOC
	MOV	@R1,ZLOC
	MOV	R0,ZLOC
	MOV	R1,ZLOC
	MOV	R2,ZLOC
	MOV	R3,ZLOC
	MOV	R4,ZLOC
	MOV	R5,ZLOC
	MOV	R6,ZLOC
	MOV	R7,ZLOC
	ANL	C,/ACC.1
	ACALL	LOC5
	CPL	ACC.1
	CPL	C
	CJNE	A,#ZLOC,L3
	CJNE	A,ZLOC,L3
	CJNE	@R0,#ZLOC,L3
	CJNE	@R1,#ZLOC,L3
	CJNE	R0,#ZLOC,L3
	CJNE	R1,#ZLOC,L3
	CJNE	R2,#ZLOC,L3
	CJNE	R3,#ZLOC,L3
	CJNE	R4,#ZLOC,L3
	CJNE	R5,#ZLOC,L3
	CJNE	R6,#ZLOC,L3
	CJNE	R7,#ZLOC,L3
	PUSH	ZLOC
	AJMP	LOC6
	CLR	ACC.1
	CLR	C
L3	SWAP	A
	XCH	A,ZLOC
	XCH	A,@R0
	XCH	A,@R1
	XCH	A,R0
	XCH	A,R1
	XCH	A,R2
	XCH	A,R3
	XCH	A,R4
	XCH	A,R5
	XCH	A,R6
	XCH	A,R7
	POP	ZLOC
	ACALL	LOC6
	SETB	ACC.1
	SETB	C
	DA	A
	DJNZ	ZLOC,L3
	XCHD	A,@R0
	XCHD	A,@R1
	DJNZ	R0,L3
	DJNZ	R1,L3
	DJNZ	R2,L3
	DJNZ	R3,L3
	DJNZ	R4,L3
	DJNZ	R5,L3
	DJNZ	R6,L3
	DJNZ	R7,L3
	MOVX	A,@DPTR
	AJMP	LOC7
	MOVX	A,@R0
	MOVX	A,@R1
	CLR	A
	MOV	A,ZLOC
	MOV	A,@R0
	MOV	A,@R1
	MOV	A,R0
	MOV	A,R1
	MOV	A,R2
	MOV	A,R3
	MOV	A,R4
	MOV	A,R5
	MOV	A,R6
	MOV	A,R7
	MOVX	@DPTR,A
	ACALL	LOC7
	MOVX	@R0,A
	MOVX	@R1,A
	CPL	A
	MOV	ZLOC,A
	MOV	@R0,A
	MOV	@R1,A
	MOV	R0,A
	MOV	R1,A
	MOV	R2,A
	MOV	R3,A
	MOV	R4,A
	MOV	R5,A
	MOV	R6,A
	MOV	R7,A

	.END



